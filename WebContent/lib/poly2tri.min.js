(function(v){function m(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-s&&a<s?k.COLLINEAR:0<a?k.CCW:k.CW}function w(a,b,c,d){var l=d.x;d=d.y;var f=a.x-l;a=a.y-d;return f*(b.y-d)-(b.x-l)*a<=s||(c.x-l)*a-f*(c.y-d)<=s?!1:!0}var y=v.poly2tri,r;r="undefined"!==typeof exports?exports:v.poly2tri={};r.noConflict=function(){v.poly2tri=y;return this};var p=function(a,b){this.name="PointError";this.points=b=b||[];this.message=a||"Invalid Points!";for(var c=0;c<b.length;c++)this.message+=" "+g.toString(b[c])};
p.prototype=Error();p.prototype.constructor=p;var g=function(a,b){this.x=+a||0;this.y=+b||0;this._p2t_edge_list=null};g.prototype.toString=function(){return"("+this.x+";"+this.y+")"};g.prototype.clone=function(){return new g(this.x,this.y)};g.prototype.set_zero=function(){this.y=this.x=0;return this};g.prototype.set=function(a,b){this.x=+a||0;this.y=+b||0;return this};g.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};g.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};
g.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};g.prototype.mul=function(a){this.x*=a;this.y*=a;return this};g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};g.prototype.normalize=function(){var a=this.length();this.x/=a;this.y/=a;return a};g.prototype.equals=function(a){return this.x===a.x&&this.y===a.y};g.negate=function(a){return new g(-a.x,-a.y)};g.add=function(a,b){return new g(a.x+b.x,a.y+b.y)};g.sub=function(a,b){return new g(a.x-b.x,a.y-b.y)};g.mul=
function(a,b){return new g(a*b.x,a*b.y)};g.cross=function(a,b){return"number"===typeof a?"number"===typeof b?a*b:new g(-a*b.y,a*b.x):"number"===typeof b?new g(b*a.y,-b*a.x):a.x*b.y-a.y*b.x};g.toString=function(a){var b=a.toString();return"[object Object]"===b?g.prototype.toString.call(a):b};g.compare=function(a,b){return a.y===b.y?a.x-b.x:a.y-b.y};g.cmp=g.compare;g.equals=function(a,b){return a.x===b.x&&a.y===b.y};g.dot=function(a,b){return a.x*b.x+a.y*b.y};var z=function(a,b){this.p=a;this.q=b;if(a.y>
b.y)this.q=a,this.p=b;else if(a.y===b.y)if(a.x>b.x)this.q=a,this.p=b;else if(a.x===b.x)throw new p("poly2tri Invalid Edge constructor: repeated points!",[a]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]);this.q._p2t_edge_list.push(this)},e=function(a,b,c){this.points_=[a,b,c];this.neighbors_=[null,null,null];this.interior_=!1;this.constrained_edge=[!1,!1,!1];this.delaunay_edge=[!1,!1,!1]};e.prototype.toString=function(){var a=g.toString;return"["+a(this.points_[0])+a(this.points_[1])+a(this.points_[2])+
"]"};e.prototype.getPoint=function(a){return this.points_[a]};e.prototype.GetPoint=e.prototype.getPoint;e.prototype.getNeighbor=function(a){return this.neighbors_[a]};e.prototype.containsPoint=function(a){var b=this.points_;return a===b[0]||a===b[1]||a===b[2]};e.prototype.containsEdge=function(a){return this.containsPoint(a.p)&&this.containsPoint(a.q)};e.prototype.containsPoints=function(a,b){return this.containsPoint(a)&&this.containsPoint(b)};e.prototype.isInterior=function(){return this.interior_};
e.prototype.setInterior=function(a){this.interior_=a;return this};e.prototype.markNeighborPointers=function(a,b,c){var d=this.points_;if(a===d[2]&&b===d[1]||a===d[1]&&b===d[2])this.neighbors_[0]=c;else if(a===d[0]&&b===d[2]||a===d[2]&&b===d[0])this.neighbors_[1]=c;else if(a===d[0]&&b===d[1]||a===d[1]&&b===d[0])this.neighbors_[2]=c;else throw Error("poly2tri Invalid Triangle.markNeighborPointers() call");};e.prototype.markNeighbor=function(a){var b=this.points_;a.containsPoints(b[1],b[2])?(this.neighbors_[0]=
a,a.markNeighborPointers(b[1],b[2],this)):a.containsPoints(b[0],b[2])?(this.neighbors_[1]=a,a.markNeighborPointers(b[0],b[2],this)):a.containsPoints(b[0],b[1])&&(this.neighbors_[2]=a,a.markNeighborPointers(b[0],b[1],this))};e.prototype.clearNeigbors=function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null};e.prototype.clearDelunayEdges=function(){this.delaunay_edge[0]=!1;this.delaunay_edge[1]=!1;this.delaunay_edge[2]=!1};e.prototype.pointCW=function(a){var b=this.points_;
return a===b[0]?b[2]:a===b[1]?b[0]:a===b[2]?b[1]:null};e.prototype.pointCCW=function(a){var b=this.points_;return a===b[0]?b[1]:a===b[1]?b[2]:a===b[2]?b[0]:null};e.prototype.neighborCW=function(a){return a===this.points_[0]?this.neighbors_[1]:a===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]};e.prototype.neighborCCW=function(a){return a===this.points_[0]?this.neighbors_[2]:a===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]};e.prototype.getConstrainedEdgeCW=function(a){return a===this.points_[0]?
this.constrained_edge[1]:a===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]};e.prototype.getConstrainedEdgeCCW=function(a){return a===this.points_[0]?this.constrained_edge[2]:a===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]};e.prototype.getConstrainedEdgeAcross=function(a){return a===this.points_[0]?this.constrained_edge[0]:a===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]};e.prototype.setConstrainedEdgeCW=function(a,b){a===this.points_[0]?
this.constrained_edge[1]=b:a===this.points_[1]?this.constrained_edge[2]=b:this.constrained_edge[0]=b};e.prototype.setConstrainedEdgeCCW=function(a,b){a===this.points_[0]?this.constrained_edge[2]=b:a===this.points_[1]?this.constrained_edge[0]=b:this.constrained_edge[1]=b};e.prototype.getDelaunayEdgeCW=function(a){return a===this.points_[0]?this.delaunay_edge[1]:a===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]};e.prototype.getDelaunayEdgeCCW=function(a){return a===this.points_[0]?this.delaunay_edge[2]:
a===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]};e.prototype.setDelaunayEdgeCW=function(a,b){a===this.points_[0]?this.delaunay_edge[1]=b:a===this.points_[1]?this.delaunay_edge[2]=b:this.delaunay_edge[0]=b};e.prototype.setDelaunayEdgeCCW=function(a,b){a===this.points_[0]?this.delaunay_edge[2]=b:a===this.points_[1]?this.delaunay_edge[0]=b:this.delaunay_edge[1]=b};e.prototype.neighborAcross=function(a){return a===this.points_[0]?this.neighbors_[0]:a===this.points_[1]?this.neighbors_[1]:
this.neighbors_[2]};e.prototype.oppositePoint=function(a,b){var c=a.pointCW(b);return this.pointCW(c)};e.prototype.legalize=function(a,b){var c=this.points_;if(a===c[0])c[1]=c[0],c[0]=c[2],c[2]=b;else if(a===c[1])c[2]=c[1],c[1]=c[0],c[0]=b;else if(a===c[2])c[0]=c[2],c[2]=c[1],c[1]=b;else throw Error("poly2tri Invalid Triangle.legalize() call");};e.prototype.index=function(a){var b=this.points_;if(a===b[0])return 0;if(a===b[1])return 1;if(a===b[2])return 2;throw Error("poly2tri Invalid Triangle.index() call");
};e.prototype.edgeIndex=function(a,b){var c=this.points_;if(a===c[0]){if(b===c[1])return 2;if(b===c[2])return 1}else if(a===c[1]){if(b===c[2])return 0;if(b===c[0])return 2}else if(a===c[2]){if(b===c[0])return 1;if(b===c[1])return 0}return-1};e.prototype.markConstrainedEdgeByIndex=function(a){this.constrained_edge[a]=!0};e.prototype.markConstrainedEdgeByEdge=function(a){this.markConstrainedEdgeByPoints(a.p,a.q)};e.prototype.markConstrainedEdgeByPoints=function(a,b){var c=this.points_;if(b===c[0]&&
a===c[1]||b===c[1]&&a===c[0])this.constrained_edge[2]=!0;else if(b===c[0]&&a===c[2]||b===c[2]&&a===c[0])this.constrained_edge[1]=!0;else if(b===c[1]&&a===c[2]||b===c[2]&&a===c[1])this.constrained_edge[0]=!0};var A=3*Math.PI/4,t=Math.PI/2,s=1E-12,k={CW:1,CCW:-1,COLLINEAR:0},u=function(a,b){this.point=a;this.triangle=b||null;this.prev=this.next=null;this.value=a.x},n=function(a,b){this.head_=a;this.tail_=b;this.search_node_=a};n.prototype.head=function(){return this.head_};n.prototype.setHead=function(a){this.head_=
a};n.prototype.tail=function(){return this.tail_};n.prototype.setTail=function(a){this.tail_=a};n.prototype.search=function(){return this.search_node_};n.prototype.setSearch=function(a){this.search_node_=a};n.prototype.findSearchNode=function(){return this.search_node_};n.prototype.locateNode=function(a){var b=this.search_node_;if(a<b.value)for(;b=b.prev;){if(a>=b.value)return this.search_node_=b}else for(;b=b.next;)if(a<b.value)return this.search_node_=b.prev;return null};n.prototype.locatePoint=
function(a){var b=a.x,c=this.findSearchNode(b),d=c.point.x;if(b===d){if(a!==c.point)if(a===c.prev.point)c=c.prev;else if(a===c.next.point)c=c.next;else throw Error("poly2tri Invalid AdvancingFront.locatePoint() call");}else if(b<d)for(;(c=c.prev)&&a!==c.point;);else for(;(c=c.next)&&a!==c.point;);c&&(this.search_node_=c);return c};var x=function(){this.right_node=this.bottom_node=this.left_node=null;this.width=0;this.left_highest=!1};x.prototype.clear=function(){this.right_node=this.bottom_node=this.left_node=
null;this.width=0;this.left_highest=!1};var B=function(){this.constrained_edge=null;this.right=!1},h=function(a,b){b=b||{};this.triangles_=[];this.map_=[];this.points_=b.cloneArrays?a.slice(0):a;this.edge_list=[];this.af_tail_=this.af_middle_=this.af_head_=this.tail_=this.head_=this.front_=this.pmin_=this.pmax_=null;this.basin=new x;this.edge_event=new B;this.initEdges(this.points_)};h.prototype.addHole=function(a){this.initEdges(a);var b,c=a.length;for(b=0;b<c;b++)this.points_.push(a[b]);return this};
h.prototype.AddHole=h.prototype.addHole;h.prototype.addPoint=function(a){this.points_.push(a);return this};h.prototype.AddPoint=h.prototype.addPoint;h.prototype.addPoints=function(a){this.points_=this.points_.concat(a);return this};h.prototype.triangulate=function(){f.triangulate(this);return this};h.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}};h.prototype.getTriangles=function(){return this.triangles_};h.prototype.GetTriangles=h.prototype.getTriangles;h.prototype.front=
function(){return this.front_};h.prototype.pointCount=function(){return this.points_.length};h.prototype.head=function(){return this.head_};h.prototype.setHead=function(a){this.head_=a};h.prototype.tail=function(){return this.tail_};h.prototype.setTail=function(a){this.tail_=a};h.prototype.getMap=function(){return this.map_};h.prototype.initTriangulation=function(){var a=this.points_[0].x,b=this.points_[0].x,c=this.points_[0].y,d=this.points_[0].y,l,f=this.points_.length;for(l=1;l<f;l++){var q=this.points_[l];
q.x>a&&(a=q.x);q.x<b&&(b=q.x);q.y>c&&(c=q.y);q.y<d&&(d=q.y)}this.pmin_=new g(b,d);this.pmax_=new g(a,c);l=0.3*(a-b);c=0.3*(c-d);this.head_=new g(a+l,d-c);this.tail_=new g(b-l,d-c);this.points_.sort(g.compare)};h.prototype.initEdges=function(a){var b,c=a.length;for(b=0;b<c;++b)this.edge_list.push(new z(a[b],a[(b+1)%c]))};h.prototype.getPoint=function(a){return this.points_[a]};h.prototype.addToMap=function(a){this.map_.push(a)};h.prototype.locateNode=function(a){return this.front_.locateNode(a.x)};
h.prototype.createAdvancingFront=function(){var a,b,c;c=new e(this.points_[0],this.tail_,this.head_);this.map_.push(c);a=new u(c.getPoint(1),c);b=new u(c.getPoint(0),c);c=new u(c.getPoint(2));this.front_=new n(a,c);a.next=b;b.next=c;b.prev=a;c.prev=b};h.prototype.removeNode=function(a){};h.prototype.mapTriangleToNodes=function(a){for(var b=0;3>b;++b)if(!a.getNeighbor(b)){var c=this.front_.locatePoint(a.pointCW(a.getPoint(b)));c&&(c.triangle=a)}};h.prototype.removeFromMap=function(a){var b,c=this.map_,
d=c.length;for(b=0;b<d;b++)if(c[b]===a){c.splice(b,1);break}};h.prototype.meshClean=function(a){a=[a];for(var b,c;b=a.pop();)if(!b.isInterior()){b.setInterior(!0);this.triangles_.push(b);for(c=0;3>c;c++)b.constrained_edge[c]||a.push(b.getNeighbor(c))}};var f={triangulate:function(a){a.initTriangulation();a.createAdvancingFront();f.sweepPoints(a);f.finalizationPolygon(a)},sweepPoints:function(a){var b,c=a.pointCount();for(b=1;b<c;++b)for(var d=a.getPoint(b),l=f.pointEvent(a,d),d=d._p2t_edge_list,e=
0;d&&e<d.length;++e)f.edgeEventByEdge(a,d[e],l)},finalizationPolygon:function(a){for(var b=a.front().head().next.triangle,c=a.front().head().next.point;!b.getConstrainedEdgeCW(c);)b=b.neighborCCW(c);a.meshClean(b)},pointEvent:function(a,b){var c=a.locateNode(b),d=f.newFrontTriangle(a,b,c);b.x<=c.point.x+s&&f.fill(a,c);f.fillAdvancingFront(a,d);return d},edgeEventByEdge:function(a,b,c){a.edge_event.constrained_edge=b;a.edge_event.right=b.p.x>b.q.x;f.isEdgeSideOfTriangle(c.triangle,b.p,b.q)||(f.fillEdgeEvent(a,
b,c),f.edgeEventByPoints(a,b.p,b.q,c.triangle,b.q))},edgeEventByPoints:function(a,b,c,d,l){if(!f.isEdgeSideOfTriangle(d,b,c)){var e=d.pointCCW(l),q=m(c,e,b);if(q===k.COLLINEAR)throw new p("poly2tri EdgeEvent: Collinear not supported!",[c,e,b]);var e=d.pointCW(l),g=m(c,e,b);if(g===k.COLLINEAR)throw new p("poly2tri EdgeEvent: Collinear not supported!",[c,e,b]);q===g?(d=q===k.CW?d.neighborCCW(l):d.neighborCW(l),f.edgeEventByPoints(a,b,c,d,l)):f.flipEdgeEvent(a,b,c,d,l)}},isEdgeSideOfTriangle:function(a,
b,c){var d=a.edgeIndex(b,c);return-1!==d?(a.markConstrainedEdgeByIndex(d),(a=a.getNeighbor(d))&&a.markConstrainedEdgeByPoints(b,c),!0):!1},newFrontTriangle:function(a,b,c){var d=new e(b,c.point,c.next.point);d.markNeighbor(c.triangle);a.addToMap(d);b=new u(b);b.next=c.next;b.prev=c;c.next.prev=b;c.next=b;f.legalize(a,d)||a.mapTriangleToNodes(d);return b},fill:function(a,b){var c=new e(b.prev.point,b.point,b.next.point);c.markNeighbor(b.prev.triangle);c.markNeighbor(b.triangle);a.addToMap(c);b.prev.next=
b.next;b.next.prev=b.prev;f.legalize(a,c)||a.mapTriangleToNodes(c)},fillAdvancingFront:function(a,b){for(var c=b.next,d;c.next;){d=f.holeAngle(c);if(d>t||d<-t)break;f.fill(a,c);c=c.next}for(c=b.prev;c.prev;){d=f.holeAngle(c);if(d>t||d<-t)break;f.fill(a,c);c=c.prev}b.next&&b.next.next&&(d=f.basinAngle(b),d<A&&f.fillBasin(a,b))},basinAngle:function(a){return Math.atan2(a.point.y-a.next.next.point.y,a.point.x-a.next.next.point.x)},holeAngle:function(a){var b=a.next.point.x-a.point.x,c=a.next.point.y-
a.point.y,d=a.prev.point.x-a.point.x;a=a.prev.point.y-a.point.y;return Math.atan2(b*a-c*d,b*d+c*a)},legalize:function(a,b){for(var c=0;3>c;++c)if(!b.delaunay_edge[c]){var d=b.getNeighbor(c);if(d){var l=b.getPoint(c),e=d.oppositePoint(b,l),g=d.index(e);if(d.constrained_edge[g]||d.delaunay_edge[g])b.constrained_edge[c]=d.constrained_edge[g];else if(f.inCircle(l,b.pointCCW(l),b.pointCW(l),e))return b.delaunay_edge[c]=!0,d.delaunay_edge[g]=!0,f.rotateTrianglePair(b,l,d,e),(l=!f.legalize(a,b))&&a.mapTriangleToNodes(b),
(l=!f.legalize(a,d))&&a.mapTriangleToNodes(d),b.delaunay_edge[c]=!1,d.delaunay_edge[g]=!1,!0}}return!1},inCircle:function(a,b,c,d){var f=a.x-d.x;a=a.y-d.y;var e=b.x-d.x;b=b.y-d.y;var g=f*b-e*a;if(0>=g)return!1;var h=c.x-d.x;c=c.y-d.y;d=h*a-f*c;return 0>=d?!1:0<(f*f+a*a)*(e*c-h*b)+(e*e+b*b)*d+(h*h+c*c)*g},rotateTrianglePair:function(a,b,c,d){var f,e,g,h;f=a.neighborCCW(b);e=a.neighborCW(b);g=c.neighborCCW(d);h=c.neighborCW(d);var k,m,n,p;k=a.getConstrainedEdgeCCW(b);m=a.getConstrainedEdgeCW(b);n=c.getConstrainedEdgeCCW(d);
p=c.getConstrainedEdgeCW(d);var r,s,t,u;r=a.getDelaunayEdgeCCW(b);s=a.getDelaunayEdgeCW(b);t=c.getDelaunayEdgeCCW(d);u=c.getDelaunayEdgeCW(d);a.legalize(b,d);c.legalize(d,b);c.setDelaunayEdgeCCW(b,r);a.setDelaunayEdgeCW(b,s);a.setDelaunayEdgeCCW(d,t);c.setDelaunayEdgeCW(d,u);c.setConstrainedEdgeCCW(b,k);a.setConstrainedEdgeCW(b,m);a.setConstrainedEdgeCCW(d,n);c.setConstrainedEdgeCW(d,p);a.clearNeigbors();c.clearNeigbors();f&&c.markNeighbor(f);e&&a.markNeighbor(e);g&&a.markNeighbor(g);h&&c.markNeighbor(h);
a.markNeighbor(c)},fillBasin:function(a,b){m(b.point,b.next.point,b.next.next.point)===k.CCW?a.basin.left_node=b.next.next:a.basin.left_node=b.next;for(a.basin.bottom_node=a.basin.left_node;a.basin.bottom_node.next&&a.basin.bottom_node.point.y>=a.basin.bottom_node.next.point.y;)a.basin.bottom_node=a.basin.bottom_node.next;if(a.basin.bottom_node!==a.basin.left_node){for(a.basin.right_node=a.basin.bottom_node;a.basin.right_node.next&&a.basin.right_node.point.y<a.basin.right_node.next.point.y;)a.basin.right_node=
a.basin.right_node.next;a.basin.right_node!==a.basin.bottom_node&&(a.basin.width=a.basin.right_node.point.x-a.basin.left_node.point.x,a.basin.left_highest=a.basin.left_node.point.y>a.basin.right_node.point.y,f.fillBasinReq(a,a.basin.bottom_node))}},fillBasinReq:function(a,b){if(!f.isShallow(a,b)){f.fill(a,b);var c;if(!(b.prev===a.basin.left_node&&b.next===a.basin.right_node)){if(b.prev===a.basin.left_node){c=m(b.point,b.next.point,b.next.next.point);if(c===k.CW)return;b=b.next}else if(b.next===a.basin.right_node){c=
m(b.point,b.prev.point,b.prev.prev.point);if(c===k.CCW)return;b=b.prev}else b=b.prev.point.y<b.next.point.y?b.prev:b.next;f.fillBasinReq(a,b)}}},isShallow:function(a,b){return a.basin.width>(a.basin.left_highest?a.basin.left_node.point.y-b.point.y:a.basin.right_node.point.y-b.point.y)?!0:!1},fillEdgeEvent:function(a,b,c){a.edge_event.right?f.fillRightAboveEdgeEvent(a,b,c):f.fillLeftAboveEdgeEvent(a,b,c)},fillRightAboveEdgeEvent:function(a,b,c){for(;c.next.point.x<b.p.x;)m(b.q,c.next.point,b.p)===
k.CCW?f.fillRightBelowEdgeEvent(a,b,c):c=c.next},fillRightBelowEdgeEvent:function(a,b,c){c.point.x<b.p.x&&(m(c.point,c.next.point,c.next.next.point)===k.CCW?f.fillRightConcaveEdgeEvent(a,b,c):(f.fillRightConvexEdgeEvent(a,b,c),f.fillRightBelowEdgeEvent(a,b,c)))},fillRightConcaveEdgeEvent:function(a,b,c){f.fill(a,c.next);c.next.point!==b.p&&(m(b.q,c.next.point,b.p)===k.CCW&&m(c.point,c.next.point,c.next.next.point)===k.CCW)&&f.fillRightConcaveEdgeEvent(a,b,c)},fillRightConvexEdgeEvent:function(a,b,
c){m(c.next.point,c.next.next.point,c.next.next.next.point)===k.CCW?f.fillRightConcaveEdgeEvent(a,b,c.next):m(b.q,c.next.next.point,b.p)===k.CCW&&f.fillRightConvexEdgeEvent(a,b,c.next)},fillLeftAboveEdgeEvent:function(a,b,c){for(;c.prev.point.x>b.p.x;)m(b.q,c.prev.point,b.p)===k.CW?f.fillLeftBelowEdgeEvent(a,b,c):c=c.prev},fillLeftBelowEdgeEvent:function(a,b,c){c.point.x>b.p.x&&(m(c.point,c.prev.point,c.prev.prev.point)===k.CW?f.fillLeftConcaveEdgeEvent(a,b,c):(f.fillLeftConvexEdgeEvent(a,b,c),f.fillLeftBelowEdgeEvent(a,
b,c)))},fillLeftConvexEdgeEvent:function(a,b,c){m(c.prev.point,c.prev.prev.point,c.prev.prev.prev.point)===k.CW?f.fillLeftConcaveEdgeEvent(a,b,c.prev):m(b.q,c.prev.prev.point,b.p)===k.CW&&f.fillLeftConvexEdgeEvent(a,b,c.prev)},fillLeftConcaveEdgeEvent:function(a,b,c){f.fill(a,c.prev);c.prev.point!==b.p&&(m(b.q,c.prev.point,b.p)===k.CW&&m(c.point,c.prev.point,c.prev.prev.point)===k.CW)&&f.fillLeftConcaveEdgeEvent(a,b,c)},flipEdgeEvent:function(a,b,c,d,e){var g=d.neighborAcross(e);if(!g)throw Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle!");
var h=g.oppositePoint(d,e);if(d.getConstrainedEdgeAcross(e))throw a=d.index(e),new p("poly2tri Intersecting Constraints",[e,h,d.getPoint((a+1)%3),d.getPoint((a+2)%3)]);if(w(e,d.pointCCW(e),d.pointCW(e),h))if(f.rotateTrianglePair(d,e,g,h),a.mapTriangleToNodes(d),a.mapTriangleToNodes(g),e===c&&h===b)c===a.edge_event.constrained_edge.q&&b===a.edge_event.constrained_edge.p&&(d.markConstrainedEdgeByPoints(b,c),g.markConstrainedEdgeByPoints(b,c),f.legalize(a,d),f.legalize(a,g));else{var k=m(c,h,b);d=f.nextFlipTriangle(a,
k,d,g,e,h);f.flipEdgeEvent(a,b,c,d,e)}else h=f.nextFlipPoint(b,c,g,h),f.flipScanEdgeEvent(a,b,c,d,g,h),f.edgeEventByPoints(a,b,c,d,e)},nextFlipTriangle:function(a,b,c,d,e,g){if(b===k.CCW)return b=d.edgeIndex(e,g),d.delaunay_edge[b]=!0,f.legalize(a,d),d.clearDelunayEdges(),c;b=c.edgeIndex(e,g);c.delaunay_edge[b]=!0;f.legalize(a,c);c.clearDelunayEdges();return d},nextFlipPoint:function(a,b,c,d){var e=m(b,d,a);if(e===k.CW)return c.pointCCW(d);if(e===k.CCW)return c.pointCW(d);throw new p("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",
[b,d,a]);},flipScanEdgeEvent:function(a,b,c,d,e,g){var h=e.neighborAcross(g);if(!h)throw Error("poly2tri [BUG:FIXME] FLIP failed due to missing triangle");e=h.oppositePoint(e,g);w(c,d.pointCCW(c),d.pointCW(c),e)?f.flipEdgeEvent(a,c,e,h,e):(e=f.nextFlipPoint(b,c,h,e),f.flipScanEdgeEvent(a,b,c,d,h,e))}};r.PointError=p;r.Point=g;r.Triangle=e;r.SweepContext=h;r.triangulate=f.triangulate;r.sweep={Triangulate:f.triangulate}})(this);
(function(){"function"===typeof Namespace&&(Namespace("js.poly2tri"),js.poly2tri=poly2tri,Namespace.provide("js.poly2tri"))})();
